<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8"><!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†ÙˆÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
    <style>
        :root { 
            --primary: #d3ad7f; 
            --bg: #13131a; 
            --card: #1e1e24; 
            --text: #ffffff; 
            --green: #27ae60; 
            --blue: #2980b9; 
            --input-bg: #2a2a35;
            /* Ù‚Ø§Ø¨Ù„ÛŒØª ØªØºÛŒÛŒØ± Ø¹Ú©Ø³ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ù‡Ø¯Ø± */
            --header-img: url('https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=1000&auto=format&fit=crop');
        }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Tahoma', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background:var(--bg); color:var(--text); padding-bottom:120px; user-select: none; }
        
        /* Ù‡Ø¯Ø± Ù¾Ù‡Ù†â€ŒØªØ± Ø¨Ø§ ØªØµÙˆÛŒØ± Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
        header { 
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), var(--header-img);
            background-size: cover;
            background-position: center;
            height: 240px; /* Ù¾Ù‡Ù†â€ŒØªØ± Ø´Ø¯ (Ø§Ø² Û±Û¸Û° Ø¨Ù‡ Û²Û´Û°) */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center; 
            border-bottom: 4px solid var(--primary); 
            position: relative; 
            z-index: 100; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.8); 
        }
        header h1 { font-size: 2rem; color: #fff; text-shadow: 2px 2px 15px #000; margin-bottom: 8px; font-weight: bold; }
        .status-badge { font-size: 0.9rem; padding: 5px 18px; border-radius: 25px; display: inline-block; backdrop-filter: blur(8px); font-weight: bold; }
        .open { background: rgba(39, 174, 96, 0.9); color: #fff; border: 1px solid rgba(255,255,255,0.2); }
        .closed { background: rgba(192, 57, 43, 0.9); color: #fff; }

        .sub-badge { position: fixed; top: 15px; left: 15px; background: rgba(0,0,0,0.8); border: 1px solid var(--primary); color: var(--primary); padding: 5px 10px; border-radius: 15px; font-size: 0.75rem; z-index: 1000; font-weight: bold; backdrop-filter: blur(5px); }
        .sub-badge.danger { border-color: #e74c3c; color: #e74c3c; }

        .cat-scroll { display: flex; gap: 10px; padding: 15px; overflow-x: auto; background: #0b0b0f; position: sticky; top: 0; z-index: 99; border-bottom: 1px solid #222; scrollbar-width: none; }
        .cat-scroll::-webkit-scrollbar { display: none; }
        .cat-btn { background: var(--card); color: #fff; padding: 10px 22px; border-radius: 25px; border: 1px solid #333; white-space: nowrap; cursor: pointer; transition: 0.3s; font-size: 0.9rem; }
        .cat-btn.active { background: var(--primary); border-color: var(--primary); color: #000; font-weight: bold; transform: scale(1.05); }

        /* Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨ØµÙˆØ±Øª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¯ÙˆØªØ§ÛŒÛŒ (Grid) */
        .menu-list { 
            padding: 15px; 
            max-width: 800px; 
            margin: 0 auto; 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
        }
        .item { 
            background: var(--card); 
            border-radius: 18px; 
            display: flex; 
            flex-direction: column; 
            border: 1px solid #2a2a35; 
            animation: fadeIn 0.5s; 
            position: relative; 
            overflow: hidden;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
        .item.inactive { opacity: 0.5; filter: grayscale(1); pointer-events: none; }
        .item img { 
            width: 100%; 
            height: 130px; 
            object-fit: cover; 
            border-bottom: 2px solid var(--primary); 
        }
        .info { padding: 12px; width: 100%; text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .info h3 { font-size: 0.95rem; margin-bottom: 8px; min-height: 38px; color: #fff; line-height: 1.4; }
        .price { color: var(--primary); font-weight: bold; font-size: 1.1rem; display: block; margin-bottom: 12px; }
        
        .add-btn { background: var(--primary); color: #000; padding: 10px 0; border-radius: 10px; font-size: 0.9rem; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        .add-btn:active { transform: scale(0.95); }
        .qty-box { display: none; align-items: center; justify-content: space-between; background: #000; border-radius: 10px; border: 1px solid var(--primary); overflow: hidden; }
        .qty-box.show { display: flex; }
        .q-btn { width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; cursor: pointer; background: #222; color: var(--primary); }
        .q-num { flex: 1; text-align: center; font-weight: bold; font-size: 1.1rem; color: #fff; }

        /* Ø¨Ø®Ø´ Ø³ÙØ§Ø±Ø´ Ùˆ ÙØ§Ú©ØªÙˆØ± */
        .order-details { background: var(--card); padding: 18px; border-top: 3px solid var(--primary); position: fixed; bottom: 80px; left: 0; right: 0; z-index: 900; display: none; max-width: 600px; margin: 0 auto; border-radius: 20px 20px 0 0; box-shadow: 0 -8px 25px rgba(0,0,0,0.6); overflow-y: auto; max-height: 70vh; }
        .order-details.active { display: block; }
        .type-selector { display: flex; gap: 12px; margin-bottom: 18px; }
        .type-btn { flex: 1; padding: 12px; background: #0b0b0f; border: 1px solid #333; color: #888; text-align: center; border-radius: 12px; cursor: pointer; font-weight: bold; }
        .type-btn.selected { background: var(--primary); color: #000; border-color: var(--primary); box-shadow: 0 4px 10px rgba(211, 173, 127, 0.3); }
        .input-group { margin-bottom: 10px; }
        .input-group input, .input-group textarea { width: 100%; padding: 12px; background: var(--input-bg); border: 1px solid #333; color: #fff; border-radius: 10px; outline: none; font-size: 0.9rem; }
        .invoice-box { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 12px; margin-bottom: 18px; border: 1px solid #222; }
        .invoice-row { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 6px; color: #bbb; }
        .invoice-row.highlight { color: var(--primary); font-weight: bold; border-top: 1px solid #333; padding-top: 8px; margin-top: 8px; font-size: 1.15rem; }
        .cart-bar { position: fixed; bottom: 0; left: 0; right: 0; background: #000; padding: 15px; z-index: 1000; border-top: 1px solid #222; }
        .final-btn { background: var(--green); color: #fff; padding: 14px; border-radius: 15px; font-weight: bold; cursor: pointer; font-size: 1.1rem; text-align: center; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3); }
        .hidden { display: none !important; }
        .dev-footer { text-align: center; margin-top: 40px; padding: 25px; border-top: 1px solid #222; color: #666; font-size: 0.8rem; background: #0e0e12; }
        .dev-icons { display: flex; justify-content: center; gap: 15px; margin-top: 12px; }
        .dev-icons a { display: inline-flex; align-items: center; justify-content: center; width: 38px; height: 38px; background: #1a1a1a; border-radius: 50%; color: #aaa; border: 1px solid #333; transition: 0.3s; }
        #lockScreen { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; z-index: 9999; flex-direction: column; justify-content: center; align-items: center; padding: 25px; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
    </style>
</head>
<body>

    <div id="lockScreen">
        <h2 style="color:#e74c3c; margin-bottom:15px;">Ù¾Ø§ÛŒØ§Ù† Ø§Ø´ØªØ±Ø§Ú© âš ï¸</h2>
        <p>Ù…Ù‡Ù„Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ù…Ù†ÙˆÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª.</p>
        <div class="dev-icons" style="margin-top:20px;">
             <a href="tel:09123456789"><svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg></a>
        </div>
    </div>

    <div id="subBadge"></div>

    <header>
        <h1 id="shopName">...</h1>
        <div id="shopStatus" class="status-badge">Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª...</div>
    </header>

    <div class="cat-scroll" id="cats"></div>

    <div class="menu-list" id="list">
        <p style="text-align:center; color:#666; margin-top:50px; grid-column: span 2;" id="loadingText">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù…Ù†Ùˆ...</p>
    </div>

    <div class="dev-footer">
        <p class="dev-title">Ù…Ø¬Ø±ÛŒ Ø·Ø±Ø­: Ú¯Ø±ÙˆÙ‡ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø±ÛŒ Ù…ÙØ¬Ø¯</p>
        <div class="dev-icons">
            <a href="tel:09123456789"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg></a>
            <a href="#"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01C17.18 3.03 14.69 2 12.04 2zM12.05 19.81c-1.48 0-2.93-.4-4.21-1.15l-.3-.18-3.11.82.83-3.04-.19-.31c-.82-1.31-1.26-2.83-1.26-4.38 0-4.54 3.7-8.24 8.24-8.24 2.2 0 4.27.86 5.82 2.42 1.56 1.56 2.41 3.63 2.41 5.83 0 4.54-3.69 8.23-8.23 8.23z"/></svg></a>
        </div>
    </div>

    <div class="order-details" id="orderDetails">
        <div class="type-selector">
            <div class="type-btn selected" onclick="setOrderType('table')" id="btn-table">ğŸ½ï¸ Ø³Ø§Ù„Ù†</div>
            <div class="type-btn" onclick="setOrderType('delivery')" id="btn-delivery">ğŸ›µ Ø¨ÛŒØ±ÙˆÙ†â€ŒØ¨Ø±</div>
        </div>
        <div class="invoice-box">
            <div class="invoice-row"><span>Ø¬Ù…Ø¹ Ø§Ù‚Ù„Ø§Ù…:</span><span id="itemsTotal">0</span></div>
            <div class="invoice-row" id="deliveryRow" style="display: none;"><span>Ù‡Ø²ÛŒÙ†Ù‡ Ù¾ÛŒÚ©:</span><span id="deliveryPriceDisplay">0</span></div>
            <div class="invoice-row highlight"><span>Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:</span><span id="finalPayable">0</span></div>
        </div>
        <div class="input-group"><textarea id="userNote" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"></textarea></div>
        <div id="form-table" class="input-group"><input type="number" id="tableNum" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÛŒØ²"></div>
        <div id="form-delivery" class="hidden">
            <div class="input-group"><input type="tel" id="userPhone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø´Ù…Ø§"></div>
            <div class="input-group"><textarea id="address" placeholder="Ø¢Ø¯Ø±Ø³ Ø¯Ù‚ÛŒÙ‚"></textarea></div>
        </div>
    </div>

    <div class="cart-bar" id="cartBar" style="display:none">
        <div class="final-btn" id="actionBtn" onclick="processOrder()">ØªÚ©Ù…ÛŒÙ„ Ø³ÙØ§Ø±Ø´</div>
    </div>

    <script>
        const hardcodedPaymentLink = "https://idpay.ir"; 
        let products = [];
        let cart = {};
        let config = { name: "ÙØ±ÙˆØ´Ú¯Ø§Ù‡", deliveryPrice: 0, phone: "", isOpen: true, paymentLink: "" };
        let orderType = 'table';
        const urlParams = new URLSearchParams(window.location.search);
        const sheetId = urlParams.get('id') || "1XoE-tWd9sor7HgqQe67z3JQCZyvt6G-IcSz9u1miRiw";

        async function startApp() {
            if (!sheetId) return;
            try {
                const menuResp = await fetch(`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=Menu&_t=${Date.now()}`);
                const settingsResp = await fetch(`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=Settings&_t=${Date.now()}`);
                const menuCsv = await menuResp.text();
                const settingsCsv = await settingsResp.text();
                parseSettings(settingsCsv);
                parseMenu(menuCsv);
            } catch (err) {
                document.getElementById('list').innerHTML = `<p style="text-align:center; padding:30px; grid-column: span 2;">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª</p>`;
            }
        }

        function parseSettings(csv) {
            const rows = csvToArr(csv);
            let settingsMap = {};
            rows.forEach(r => { if(r.length >= 2) settingsMap[r[0].replace(/"/g,'').trim()] = r[1].replace(/"/g,'').trim(); });
            if(settingsMap['ShopName']) {
                config.name = settingsMap['ShopName'];
                document.getElementById('shopName').innerText = config.name;
            }
            if(settingsMap['Phone']) config.phone = settingsMap['Phone'];
            if(settingsMap['DeliveryPrice']) config.deliveryPrice = parseInt(settingsMap['DeliveryPrice']) || 0;
            config.paymentLink = hardcodedPaymentLink || settingsMap['PaymentLink'];
            if(settingsMap['IsOpen'] && settingsMap['IsOpen'].toUpperCase() === 'FALSE') {
                config.isOpen = false;
                document.getElementById('shopStatus').innerText = "â›” Ø¨Ø³ØªÙ‡ Ø§Ø³Øª";
                document.getElementById('shopStatus').className = "status-badge closed";
            } else {
                document.getElementById('shopStatus').innerText = "âœ… Ø¨Ø§Ø² Ø§Ø³Øª";
                document.getElementById('shopStatus').className = "status-badge open";
            }
            if (settingsMap['ExpireDate']) checkSubscription(settingsMap['ExpireDate']);
        }

        function checkSubscription(dateStr) {
            try {
                const expire = new Date(dateStr);
                const now = new Date();
                const diffDays = Math.ceil((expire - now) / (1000 * 60 * 60 * 24)); 
                if (diffDays <= 0) document.getElementById('lockScreen').style.display = 'flex';
                else {
                    const badge = document.getElementById('subBadge');
                    badge.innerHTML = `ğŸ“… Ø§Ø¹ØªØ¨Ø§Ø±: ${diffDays} Ø±ÙˆØ²`;
                    badge.className = diffDays < 7 ? 'sub-badge danger' : 'sub-badge';
                }
            } catch (e) {}
        }

        function parseMenu(csv) {
            const rows = csvToArr(csv);
            let tempCats = new Set();
            for(let i=1; i<rows.length; i++) { 
                const r = rows[i]; if(r.length < 3) continue;
                const isActive = (r[4] && r[4].toUpperCase().includes('FALSE')) ? false : true;
                const cat = r[0].replace(/"/g, '').trim();
                tempCats.add(cat);
                products.push({ id: i, c: cat, t: r[1].replace(/"/g, '').trim(), p: parseInt(r[2].replace(/,/g, '').trim()) || 0, i: r[3] ? r[3].replace(/"/g, '').trim() : '', active: isActive });
            }
            let catHtml = `<div class="cat-btn active" onclick="filter('all', this)">Ù‡Ù…Ù‡</div>`;
            tempCats.forEach(c => { catHtml += `<div class="cat-btn" onclick="filter('${c}', this)">${c}</div>`; });
            document.getElementById('cats').innerHTML = catHtml;
            render('all');
        }

        function csvToArr(str) {
            const rows = []; let currentRow = []; let currentVal = ''; let insideQuote = false;
            for(let i=0; i<str.length; i++) {
                const char = str[i];
                if(char === '"') insideQuote = !insideQuote;
                else if(char === ',' && !insideQuote) { currentRow.push(currentVal); currentVal = ''; }
                else if(char === '\n' && !insideQuote) { currentRow.push(currentVal); rows.push(currentRow); currentRow = []; currentVal = ''; }
                else currentVal += char;
            }
            if(currentVal) currentRow.push(currentVal);
            if(currentRow.length) rows.push(currentRow);
            return rows;
        }

        function render(cat) {
            const list = document.getElementById('list');
            list.innerHTML = '';
            const items = cat === 'all' ? products : products.filter(x => x.c === cat);
            if(items.length === 0) { list.innerHTML = '<p style="text-align:center; grid-column: span 2;">Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>'; return; }
            items.forEach(x => {
                const count = cart[x.id] || 0;
                let btnHtml = !x.active ? `<span style="color:#e74c3c; font-size:0.85rem;">Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯</span>` 
                    : (count === 0 ? `<div class="add-btn" onclick="upd(${x.id}, 1)">Ø§ÙØ²ÙˆØ¯Ù†</div>` 
                    : `<div class="qty-box show"><div class="q-btn" onclick="upd(${x.id}, 1)">+</div><div class="q-num">${count}</div><div class="q-btn" onclick="upd(${x.id}, -1)">-</div></div>`);
                list.innerHTML += `<div class="item ${!x.active ? 'inactive' : ''}"><img src="${x.i}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1170/1170576.png'"><div class="info"><h3>${x.t}</h3><span class="price">${x.p.toLocaleString()}</span>${btnHtml}</div></div>`;
            });
            calcTotal();
        }

        window.filter = (cat, el) => {
            document.querySelectorAll('.cat-btn').forEach(x=>x.classList.remove('active'));
            el.classList.add('active'); render(cat);
        };

        window.upd = (id, n) => {
            if(!config.isOpen) return alert('ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¨Ø³ØªÙ‡ Ø§Ø³Øª.');
            if(!cart[id]) cart[id]=0; cart[id]+=n;
            if(cart[id]<=0) delete cart[id];
            calcTotal();
            const activeBtn = document.querySelector('.cat-btn.active');
            render(activeBtn && activeBtn.innerText !== 'Ù‡Ù…Ù‡' ? activeBtn.innerText : 'all');
        };

        function calcTotal() {
            let total = 0, count = 0;
            for(let id in cart) { const p = products.find(x=>x.id==id); if(p) { total += p.p * cart[id]; count += cart[id]; } }
            let final = orderType === 'delivery' ? total + config.deliveryPrice : total;
            document.getElementById('itemsTotal').innerText = total.toLocaleString();
            document.getElementById('deliveryPriceDisplay').innerText = config.deliveryPrice.toLocaleString();
            document.getElementById('finalPayable').innerText = final.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
            const bar = document.getElementById('cartBar');
            const details = document.getElementById('orderDetails');
            if(count>0) { bar.style.display='flex'; details.classList.add('active'); }
            else { bar.style.display='none'; details.classList.remove('active'); }
            const btn = document.getElementById('actionBtn');
            if(config.isOpen) btn.innerHTML = orderType === 'delivery' ? `Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ† (${final.toLocaleString()})` : `Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ø³Ø§Ù„Ù†`;
        }

        window.setOrderType = (type) => {
            orderType = type;
            document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('selected'));
            document.getElementById('btn-'+type).classList.add('selected');
            if(type === 'table') {
                document.getElementById('form-table').classList.remove('hidden');
                document.getElementById('form-delivery').classList.add('hidden');
                document.getElementById('deliveryRow').style.display='none';
            } else {
                document.getElementById('form-table').classList.add('hidden');
                document.getElementById('form-delivery').classList.remove('hidden');
                document.getElementById('deliveryRow').style.display='flex';
            }
            calcTotal();
        };

        window.processOrder = () => {
            if(!config.isOpen) return;
            let desc = "";
            for(let id in cart) { const p = products.find(x=>x.id==id); if(p) desc += `${p.t}(${cart[id]}) - `; }
            const note = document.getElementById('userNote').value;
            if(note) desc += `\nÙ¾ÛŒØ§Ù…: ${note}`;
            
            if(orderType === 'table') {
                const tNum = document.getElementById('tableNum').value;
                if(!tNum) return alert('Ø´Ù…Ø§Ø±Ù‡ Ù…ÛŒØ² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                window.open(`https://wa.me/${config.phone}?text=${encodeURIComponent(`Ø³ÙØ§Ø±Ø´ Ø³Ø§Ù„Ù†\nÙ…ÛŒØ²: ${tNum}\n${desc}`)}`);
            } else {
                const ph = document.getElementById('userPhone').value;
                const ad = document.getElementById('address').value;
                if(!ph || !ad) return alert('Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ùˆ Ø¢Ø¯Ø±Ø³ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.');
                
                let total = 0; for(let id in cart) { const p = products.find(x=>x.id==id); if(p) total += p.p * cart[id]; }
                const finalAmount = total + config.deliveryPrice;

                // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ù¾ÛŒØ§Ù… Ù‡Ø´Ø¯Ø§Ø± Ø¯Ù‚ÛŒÙ‚ Ø´Ù…Ø§
                const confirmMsg = `Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª: ${finalAmount.toLocaleString()} ØªÙˆÙ…Ø§Ù†\n\nâš ï¸ ØªÙˆØ¬Ù‡ Ù…Ù‡Ù…:\nÙ„Ø·ÙØ§ Ù¾Ø³ Ø§Ø² Ø§ØªÙ…Ø§Ù… Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ø­ØªÙ…Ø§ Ø§Ø² ØµÙØ­Ù‡ Ø±Ø³ÛŒØ¯ Ø¨Ø§Ù†Ú©ÛŒ "Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª" Ø¨Ú¯ÛŒØ±ÛŒØ¯ Ùˆ Ø¢Ù† Ø±Ø§ Ø¯Ø± ÙˆØ§ØªØ³â€ŒØ§Ù¾ Ø¨Ø±Ø§ÛŒ Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.\n\nØ¢ÛŒØ§ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ`;
                
                if(confirm(confirmMsg)) {
                    let payUrl = config.paymentLink;
                    if(payUrl.includes('idpay.ir')) payUrl += (payUrl.includes('?') ? '&' : '?') + `amount=${finalAmount}0`;
                    window.location.href = payUrl;
                }
            }
        };

        startApp();
    </script>
</body>
</html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†ÙˆÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
    <style>
        :root { 
            --primary: #d3ad7f; 
            --bg: #13131a; 
            --card: #1e1e24; 
            --text: #ffffff; 
            --green: #27ae60; 
            --blue: #2980b9; 
            --input-bg: #2a2a35;
            --header-img: url('https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=1000&auto=format&fit=crop');
        }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Tahoma', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background:var(--bg); color:var(--text); padding-bottom:120px; user-select: none; }
        
        header { 
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), var(--header-img);
            background-size: cover;
            background-position: center;
            height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center; 
            border-bottom: 5px solid var(--primary); 
            position: relative; 
            z-index: 100; 
        }
        header h1 { font-size: 2.2rem; color: #fff; text-shadow: 2px 2px 15px #000; margin-bottom: 8px; font-weight: bold; }
        .status-badge { font-size: 0.9rem; padding: 5px 18px; border-radius: 25px; display: inline-block; backdrop-filter: blur(8px); font-weight: bold; }
        .open { background: rgba(39, 174, 96, 0.9); color: #fff; }

        /* Û±. Ø¨Ù†Ø± Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯Ú¯ÙˆÛŒÛŒ */
        .welcome-banner {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(180deg, #1e1e24 0%, #13131a 100%);
            border-bottom: 1px solid #333;
        }
        .welcome-banner h2 { color: var(--primary); margin-bottom: 15px; font-size: 1.5rem; }
        .welcome-banner p { line-height: 1.8; color: #ccc; max-width: 500px; margin: 0 auto; font-size: 0.95rem; }

        .cat-scroll { display: flex; gap: 10px; padding: 15px; overflow-x: auto; background: #0b0b0f; position: sticky; top: 0; z-index: 99; border-bottom: 1px solid #222; scrollbar-width: none; }
        .cat-scroll::-webkit-scrollbar { display: none; }
        .cat-btn { background: var(--card); color: #fff; padding: 10px 22px; border-radius: 25px; border: 1px solid #333; white-space: nowrap; cursor: pointer; transition: 0.3s; font-size: 0.9rem; }
        .cat-btn.active { background: var(--primary); border-color: var(--primary); color: #000; font-weight: bold; }

        .menu-list { 
            padding: 15px; 
            max-width: 800px; 
            margin: 0 auto; 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
            display: none; /* Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ Ù…Ø®ÙÛŒ ØªØ§ Ø¯Ø³ØªÙ‡â€ŒØ§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´ÙˆØ¯ */
        }
        .item { background: var(--card); border-radius: 18px; display: flex; flex-direction: column; border: 1px solid #2a2a35; animation: fadeIn 0.5s; overflow: hidden; }
        .item img { width: 100%; height: 130px; object-fit: cover; border-bottom: 2px solid var(--primary); }
        .info { padding: 12px; text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .info h3 { font-size: 0.9rem; margin-bottom: 8px; color: #fff; }
        .price { color: var(--primary); font-weight: bold; font-size: 1rem; margin-bottom: 10px; display: block; }
        
        .add-btn { background: var(--primary); color: #000; padding: 10px 0; border-radius: 10px; font-size: 0.85rem; cursor: pointer; font-weight: bold; }
        .qty-box { display: none; align-items: center; justify-content: space-between; background: #000; border-radius: 10px; border: 1px solid var(--primary); overflow: hidden; }
        .qty-box.show { display: flex; }
        .q-btn { width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; background: #222; color: var(--primary); }
        .q-num { flex: 1; text-align: center; font-weight: bold; color: #fff; }

        .floating-order-btn { position: fixed; bottom: 25px; right: 20px; background: var(--green); color: #fff; padding: 15px 25px; border-radius: 50px; font-weight: bold; box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 1001; display: none; align-items: center; gap: 10px; cursor: pointer; border: 2px solid rgba(255,255,255,0.2); }

        /* Û². Ø§Ø³ØªØ§ÛŒÙ„ Ù„ÛŒØ³Øª Ø§Ù‚Ù„Ø§Ù… Ø¯Ø± ÙØ§Ú©ØªÙˆØ± */
        .cart-items-review { margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        .review-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; background: #2a2a35; padding: 8px 12px; border-radius: 10px; }
        .review-info { flex: 1; }
        .review-info h4 { font-size: 0.9rem; color: #fff; }
        .review-info span { font-size: 0.8rem; color: var(--primary); }
        .review-controls { display: flex; align-items: center; gap: 10px; background: #000; border-radius: 8px; padding: 2px 8px; border: 1px solid #444; }

        .order-details { background: var(--card); padding: 18px; border-top: 3px solid var(--primary); position: fixed; bottom: 0; left: 0; right: 0; z-index: 1002; display: none; max-width: 600px; margin: 0 auto; border-radius: 25px 25px 0 0; box-shadow: 0 -8px 50px rgba(0,0,0,0.8); overflow-y: auto; max-height: 90vh; }
        .order-details.active { display: block; }
        .close-details { text-align: left; color: #888; margin-bottom: 15px; cursor: pointer; font-size: 0.9rem; }

        .type-selector { display: flex; gap: 12px; margin-bottom: 18px; }
        .type-btn { flex: 1; padding: 12px; background: #0b0b0f; border: 1px solid #333; color: #888; text-align: center; border-radius: 12px; cursor: pointer; }
        .type-btn.selected { background: var(--primary); color: #000; font-weight: bold; }
        .input-group { margin-bottom: 10px; }
        .input-group input, .input-group textarea { width: 100%; padding: 12px; background: var(--input-bg); border: 1px solid #333; color: #fff; border-radius: 10px; outline: none; }
        .invoice-box { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 12px; margin-bottom: 18px; }
        .invoice-row { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 6px; color: #bbb; }
        .invoice-row.highlight { color: var(--primary); font-weight: bold; border-top: 1px solid #333; padding-top: 8px; font-size: 1.1rem; }
        .final-btn { background: var(--green); color: #fff; padding: 15px; border-radius: 15px; font-weight: bold; cursor: pointer; text-align: center; width: 100%; }
        .hidden { display: none !important; }
        .sub-badge { position: fixed; top: 15px; left: 15px; background: rgba(0,0,0,0.8); border: 1px solid var(--primary); color: var(--primary); padding: 5px 10px; border-radius: 15px; font-size: 0.75rem; z-index: 1000; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
    </style>
</head>
<body>

    <div id="subBadge"></div>

    <header>
        <h1 id="shopName">...</h1>
        <div id="shopStatus" class="status-badge">Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª...</div>
    </header>

    <div class="welcome-banner" id="welcomeBanner">
        <h2>Ø¨Ù‡ ÙØ³Øªâ€ŒÙÙˆØ¯ Ù…Ø§ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h2>
        <p>Ø¨Ù‡ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ù…ÙˆØ§Ø¯ Ø§ÙˆÙ„ÛŒÙ‡ØŒ Ø·Ø¹Ù…â€ŒÙ‡Ø§ÛŒ Ø§ØµÛŒÙ„ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø³Ø±ÛŒØ¹. Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ù†ÙˆØŒ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.</p>
    </div>

    <div class="cat-scroll" id="cats"></div>

    <div class="menu-list" id="list"></div>

    <div class="floating-order-btn" id="floatingOrderBtn" onclick="toggleOrderForm(true)">
        <span>ğŸ›’ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ± Ùˆ ØªØ§ÛŒÛŒØ¯</span>
    </div>

    <div class="order-details" id="orderDetails">
        <div class="close-details" onclick="toggleOrderForm(false)">âœ– Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†Ùˆ</div>
        
        <h3 style="margin-bottom:15px; color:var(--primary)">Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ Ø³ÙØ§Ø±Ø´:</h3>
        
        <div id="cartReviewList" class="cart-items-review"></div>

        <div class="type-selector">
            <div class="type-btn selected" onclick="setOrderType('table')" id="btn-table">ğŸ½ï¸ Ø³Ø§Ù„Ù†</div>
            <div class="type-btn" onclick="setOrderType('delivery')" id="btn-delivery">ğŸ›µ Ø¨ÛŒØ±ÙˆÙ†â€ŒØ¨Ø±</div>
        </div>
        <div class="invoice-box">
            <div class="invoice-row"><span>Ø¬Ù…Ø¹ Ø§Ù‚Ù„Ø§Ù…:</span><span id="itemsTotal">0</span></div>
            <div class="invoice-row" id="deliveryRow" style="display: none;"><span>Ù‡Ø²ÛŒÙ†Ù‡ Ù¾ÛŒÚ©:</span><span id="deliveryPriceDisplay">0</span></div>
            <div class="invoice-row highlight"><span>Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:</span><span id="finalPayable">0</span></div>
        </div>
        <div class="input-group"><textarea id="userNote" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø³ÙØ§Ø±Ø´ (Ù…Ø«Ù„Ø§Ù‹ Ø¨Ø¯ÙˆÙ† Ø³Ø³)"></textarea></div>
        <div id="form-table" class="input-group"><input type="number" id="tableNum" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÛŒØ²"></div>
        <div id="form-delivery" class="hidden">
            <div class="input-group"><input type="tel" id="userPhone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³"></div>
            <div class="input-group"><textarea id="address" placeholder="Ø¢Ø¯Ø±Ø³ Ø¯Ù‚ÛŒÙ‚ Ø§Ø±Ø³Ø§Ù„"></textarea></div>
        </div>
        <div class="final-btn" id="actionBtn" onclick="processOrder()">Ø«Ø¨Øª Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‡Ø§ÛŒÛŒ</div>
    </div>

    <script>
        const hardcodedPaymentLink = "https://idpay.ir"; 
        let products = [];
        let cart = {};
        let config = { name: "ÙØ³Øª ÙÙˆØ¯", deliveryPrice: 0, phone: "", isOpen: true, paymentLink: "" };
        let orderType = 'table';
        const urlParams = new URLSearchParams(window.location.search);
        const sheetId = urlParams.get('id') || "1XoE-tWd9sor7HgqQe67z3JQCZyvt6G-IcSz9u1miRiw";

        async function startApp() {
            try {
                const menuResp = await fetch(`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=Menu&_t=${Date.now()}`);
                const settingsResp = await fetch(`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=Settings&_t=${Date.now()}`);
                parseSettings(await settingsResp.text());
                parseMenu(await menuResp.text());
            } catch (err) {
                console.error(err);
            }
        }

        function parseSettings(csv) {
            const rows = csvToArr(csv);
            let settingsMap = {};
            rows.forEach(r => { if(r.length >= 2) settingsMap[r[0].replace(/"/g,'').trim()] = r[1].replace(/"/g,'').trim(); });
            document.getElementById('shopName').innerText = settingsMap['ShopName'] || "ÙØ³Øª ÙÙˆØ¯";
            config.phone = settingsMap['Phone'] || "";
            config.deliveryPrice = parseInt(settingsMap['DeliveryPrice']) || 0;
            config.paymentLink = hardcodedPaymentLink || settingsMap['PaymentLink'];
            if(settingsMap['ExpireDate']) checkSubscription(settingsMap['ExpireDate']);
        }

        function checkSubscription(dateStr) {
            const expire = new Date(dateStr);
            const now = new Date();
            const diffDays = Math.ceil((expire - now) / (1000 * 60 * 60 * 24)); 
            if (diffDays > 0) document.getElementById('subBadge').innerHTML = `ğŸ“… Ø§Ø¹ØªØ¨Ø§Ø±: ${diffDays} Ø±ÙˆØ²`;
        }

        function parseMenu(csv) {
            const rows = csvToArr(csv);
            let tempCats = new Set();
            for(let i=1; i<rows.length; i++) { 
                const r = rows[i]; if(r.length < 3) continue;
                const cat = r[0].replace(/"/g, '').trim();
                tempCats.add(cat);
                products.push({ id: i, c: cat, t: r[1].replace(/"/g, '').trim(), p: parseInt(r[2].replace(/,/g, '').trim()) || 0, i: r[3] ? r[3].replace(/"/g, '').trim() : '', active: r[4] !== 'FALSE' });
            }
            let catHtml = "";
            tempCats.forEach((c) => { 
                catHtml += `<div class="cat-btn" onclick="filter('${c}', this)">${c}</div>`; 
            });
            document.getElementById('cats').innerHTML = catHtml;
        }

        function csvToArr(str) {
            const rows = []; let currentRow = []; let currentVal = ''; let insideQuote = false;
            for(let i=0; i<str.length; i++) {
                const char = str[i];
                if(char === '"') insideQuote = !insideQuote;
                else if(char === ',' && !insideQuote) { currentRow.push(currentVal); currentVal = ''; }
                else if(char === '\n' && !insideQuote) { currentRow.push(currentVal); rows.push(currentRow); currentRow = []; currentVal = ''; }
                else currentVal += char;
            }
            if(currentVal) currentRow.push(currentVal);
            if(currentRow.length) rows.push(currentRow);
            return rows;
        }

        function filter(cat, el) {
            document.querySelectorAll('.cat-btn').forEach(x=>x.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('welcomeBanner').style.display = 'none';
            document.getElementById('list').style.display = 'grid';
            render(cat);
        }

        function render(cat) {
            const list = document.getElementById('list');
            list.innerHTML = '';
            products.filter(x => x.c === cat).forEach(x => {
                const count = cart[x.id] || 0;
                let btnHtml = !x.active ? `<span style="color:#e74c3c;">Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯</span>` 
                    : (count === 0 ? `<div class="add-btn" onclick="upd(${x.id}, 1)">Ø§ÙØ²ÙˆØ¯Ù†</div>` 
                    : `<div class="qty-box show"><div class="q-btn" onclick="upd(${x.id}, 1)">+</div><div class="q-num">${count}</div><div class="q-btn" onclick="upd(${x.id}, -1)">-</div></div>`);
                list.innerHTML += `<div class="item"><img src="${x.i}"><div class="info"><h3>${x.t}</h3><span class="price">${x.p.toLocaleString()}</span>${btnHtml}</div></div>`;
            });
            updateFloatingBtn();
        }

        function upd(id, n) {
            cart[id] = (cart[id] || 0) + n;
            if(cart[id] <= 0) delete cart[id];
            const activeBtn = document.querySelector('.cat-btn.active');
            if(activeBtn) render(activeBtn.innerText);
            if(document.getElementById('orderDetails').classList.contains('active')) renderCartReview();
            calcTotal();
        }

        function updateFloatingBtn() {
            let count = Object.values(cart).reduce((a, b) => a + b, 0);
            document.getElementById('floatingOrderBtn').style.display = count > 0 ? 'flex' : 'none';
        }

        function toggleOrderForm(show) {
            document.getElementById('orderDetails').classList.toggle('active', show);
            if(show) renderCartReview();
        }

        // Û². Ø±Ù†Ø¯Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª ÙØ§Ú©ØªÙˆØ± Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø´ØªØ±ÛŒ
        function renderCartReview() {
            const reviewList = document.getElementById('cartReviewList');
            reviewList.innerHTML = '';
            for(let id in cart) {
                const p = products.find(x=>x.id==id);
                if(p) {
                    reviewList.innerHTML += `
                        <div class="review-item">
                            <div class="review-info">
                                <h4>${p.t}</h4>
                                <span>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${p.p.toLocaleString()}</span>
                            </div>
                            <div class="review-controls">
                                <div style="color:var(--primary); font-size:1.2rem; cursor:pointer" onclick="upd(${id}, 1)">+</div>
                                <div style="color:#fff; font-weight:bold">${cart[id]}</div>
                                <div style="color:#e74c3c; font-size:1.5rem; cursor:pointer" onclick="upd(${id}, -1)">-</div>
                            </div>
                        </div>`;
                }
            }
        }

        function calcTotal() {
            let total = 0;
            for(let id in cart) { const p = products.find(x=>x.id==id); if(p) total += p.p * cart[id]; }
            let final = orderType === 'delivery' ? total + config.deliveryPrice : total;
            document.getElementById('itemsTotal').innerText = total.toLocaleString();
            document.getElementById('deliveryPriceDisplay').innerText = config.deliveryPrice.toLocaleString();
            document.getElementById('finalPayable').innerText = final.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
            updateFloatingBtn();
        }

        function setOrderType(type) {
            orderType = type;
            document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('selected'));
            document.getElementById('btn-'+type).classList.add('selected');
            document.getElementById('form-table').classList.toggle('hidden', type !== 'table');
            document.getElementById('form-delivery').classList.toggle('hidden', type === 'table');
            document.getElementById('deliveryRow').style.display = type === 'table' ? 'none' : 'flex';
            calcTotal();
        }

        function processOrder() {
            let desc = "";
            for(let id in cart) { const p = products.find(x=>x.id==id); if(p) desc += `${p.t}(${cart[id]}) - `; }
            if(orderType === 'table') {
                const tNum = document.getElementById('tableNum').value;
                if(!tNum) return alert('Ø´Ù…Ø§Ø±Ù‡ Ù…ÛŒØ² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                window.open(`https://wa.me/${config.phone}?text=${encodeURIComponent(`Ø³ÙØ§Ø±Ø´ Ø³Ø§Ù„Ù†\nÙ…ÛŒØ²: ${tNum}\n${desc}`)}`);
            } else {
                const ph = document.getElementById('userPhone').value;
                const ad = document.getElementById('address').value;
                if(!ph || !ad) return alert('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.');
                let total = 0; for(let id in cart) { const p = products.find(x=>x.id==id); if(p) total += p.p * cart[id]; }
                const finalAmount = total + config.deliveryPrice;
                if(confirm(`Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ: ${finalAmount.toLocaleString()} ØªÙˆÙ…Ø§Ù†\nØ¢Ù…Ø§Ø¯Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø³ØªÛŒØ¯ØŸ`)) {
                    let payUrl = config.paymentLink;
                    if(payUrl.includes('idpay.ir')) payUrl += (payUrl.includes('?') ? '&' : '?') + `amount=${finalAmount}0`;
                    window.location.href = payUrl;
                }
            }
        }

        startApp();
    </script>
</body>
</html>
